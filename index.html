<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Simple Roulette</title>
  <style>
    :root {
      --bg: #f5f5f5;
      --panel: #ffffff;
      --text: #111111;
      --muted: #666666;
      --border: #d9d9d9;
      --red: #c93b3b;
      --black: #222222;
      --win: #1f7a1f;
      --lose: #b42323;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: grid;
      place-items: center;
      font-family: "Trebuchet MS", "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
      padding: 20px;
    }

    .app {
      width: min(760px, 100%);
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 20px;
      display: grid;
      gap: 16px;
    }

    h1 {
      margin: 0;
      font-size: 1.5rem;
    }

    .layout {
      display: grid;
      gap: 18px;
      grid-template-columns: 1fr 1fr;
      align-items: start;
    }

    @media (max-width: 760px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .wheel-shell {
      position: relative;
      width: min(320px, 80vw);
      margin: 12px auto 0;
    }

    .pointer {
      position: absolute;
      left: 50%;
      top: -10px;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 12px solid transparent;
      border-right: 12px solid transparent;
      border-top: 22px solid #111;
      z-index: 2;
    }

    .wheel {
      width: 100%;
      aspect-ratio: 1;
      border-radius: 50%;
      border: 3px solid #111;
      background: conic-gradient(
        var(--red) 0deg 30deg,
        var(--black) 30deg 60deg,
        var(--red) 60deg 90deg,
        var(--black) 90deg 120deg,
        var(--red) 120deg 150deg,
        var(--black) 150deg 180deg,
        var(--red) 180deg 210deg,
        var(--black) 210deg 240deg,
        var(--red) 240deg 270deg,
        var(--black) 270deg 300deg,
        var(--red) 300deg 330deg,
        var(--black) 330deg 360deg
      );
      transition: transform 4s ease-out;
      position: relative;
    }

    .wheel::after {
      content: "";
      position: absolute;
      inset: 0;
      margin: auto;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 2px solid #111;
      background: #fff;
    }

    .controls {
      display: grid;
      gap: 12px;
    }

    .balance {
      font-size: 1.15rem;
      font-weight: 700;
    }

    .row {
      display: grid;
      gap: 6px;
    }

    label {
      color: var(--muted);
      font-size: 0.95rem;
    }

    input,
    button {
      font: inherit;
      padding: 10px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
    }

    .color-pick {
      display: flex;
      gap: 10px;
    }

    .color-pick button {
      flex: 1;
    }

    .color-pick button.active[data-color="red"] {
      border-color: var(--red);
      color: var(--red);
      font-weight: 700;
    }

    .color-pick button.active[data-color="black"] {
      border-color: #000;
      color: #000;
      font-weight: 700;
    }

    #spinBtn {
      border-color: #111;
      font-weight: 700;
    }

    #spinBtn:disabled {
      color: #888;
      border-color: var(--border);
    }

    .result {
      min-height: 24px;
      font-weight: 700;
    }

    .result.win {
      color: var(--win);
    }

    .result.lose {
      color: var(--lose);
    }
  </style>
</head>
<body>
  <main class="app">
    <h1>Roulette (Fake Money)</h1>

    <section class="layout">
      <div class="wheel-shell">
        <div class="pointer" aria-hidden="true"></div>
        <div class="wheel" id="wheel" aria-label="Roulette wheel"></div>
      </div>

      <div class="controls">
        <div class="balance" id="balanceDisplay">Balance: $100</div>

        <div class="row">
          <label for="betInput">Amount to bet</label>
          <input id="betInput" type="number" min="1" step="1" value="10" />
        </div>

        <div class="row">
          <label>Pick a color</label>
          <div class="color-pick">
            <button type="button" class="pick active" data-color="red">Red</button>
            <button type="button" class="pick" data-color="black">Black</button>
          </div>
        </div>

        <button id="spinBtn" type="button">Spin</button>
        <div class="result" id="result"></div>
      </div>
    </section>
  </main>

  <script>
    const wheel = document.getElementById("wheel");
    const balanceDisplay = document.getElementById("balanceDisplay");
    const betInput = document.getElementById("betInput");
    const spinBtn = document.getElementById("spinBtn");
    const resultEl = document.getElementById("result");
    const pickButtons = [...document.querySelectorAll(".pick")];

    const SEGMENTS = 12;
    const SEGMENT_ANGLE = 360 / SEGMENTS;
    let balance = 100;
    let currentRotation = 0;
    let spinning = false;
    let pickedColor = "red";

    function mod(n, m) {
      return ((n % m) + m) % m;
    }

    function fmt(amount) {
      return "$" + Math.floor(amount);
    }

    function updateUI() {
      balanceDisplay.textContent = `Balance: ${fmt(balance)}`;
      spinBtn.disabled = spinning || balance <= 0;
    }

    function setResult(message, type = "") {
      resultEl.textContent = message;
      resultEl.className = "result" + (type ? " " + type : "");
    }

    pickButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        pickedColor = btn.dataset.color;
        pickButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
      });
    });

    spinBtn.addEventListener("click", () => {
      if (spinning) return;

      const bet = Math.floor(Number(betInput.value));
      if (!Number.isFinite(bet) || bet < 1) {
        setResult("Enter a valid bet amount.", "lose");
        return;
      }
      if (bet > balance) {
        setResult("Bet cannot be bigger than your balance.", "lose");
        return;
      }

      spinning = true;
      updateUI();
      setResult("Spinning...");

      const landedIndex = Math.floor(Math.random() * SEGMENTS);
      const landedColor = landedIndex % 2 === 0 ? "black" : "red";

      const landedCenter = landedIndex * SEGMENT_ANGLE + SEGMENT_ANGLE / 2;
      const desiredAngleAtTop = mod(-90 - landedCenter, 360);
      const currentAngle = mod(currentRotation, 360);
      const angleToTravel = mod(desiredAngleAtTop - currentAngle, 360);
      const fullTurns = 5 + Math.floor(Math.random() * 2);

      currentRotation += fullTurns * 360 + angleToTravel;
      wheel.style.transform = `rotate(${currentRotation}deg)`;

      window.setTimeout(() => {
        const won = pickedColor === landedColor;

        if (won) {
          balance += bet;
          setResult(`Landed on ${landedColor}. You won ${fmt(bet)}.`, "win");
        } else {
          balance -= bet;
          setResult(`Landed on ${landedColor}. You lost ${fmt(bet)}.`, "lose");
        }

        spinning = false;
        updateUI();
      }, 4100);
    });

    updateUI();
  </script>
</body>
</html>
